<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Javascript数据结构与算法之堆 | central park</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Just playing around">
    <link rel="preload" href="/assets/css/0.styles.3f949b7f.css" as="style"><link rel="preload" href="/assets/js/app.40b58ba7.js" as="script"><link rel="preload" href="/assets/js/2.f70d309f.js" as="script"><link rel="preload" href="/assets/js/21.e78b3db0.js" as="script"><link rel="prefetch" href="/assets/js/10.2b410955.js"><link rel="prefetch" href="/assets/js/11.d923aa01.js"><link rel="prefetch" href="/assets/js/12.5ba5e05d.js"><link rel="prefetch" href="/assets/js/13.6b5c1377.js"><link rel="prefetch" href="/assets/js/14.038019f7.js"><link rel="prefetch" href="/assets/js/15.75fed763.js"><link rel="prefetch" href="/assets/js/16.14e1394f.js"><link rel="prefetch" href="/assets/js/17.e5a57e49.js"><link rel="prefetch" href="/assets/js/18.ba771a4a.js"><link rel="prefetch" href="/assets/js/19.da4f655e.js"><link rel="prefetch" href="/assets/js/20.1720851d.js"><link rel="prefetch" href="/assets/js/22.0bc3bed5.js"><link rel="prefetch" href="/assets/js/23.adba2105.js"><link rel="prefetch" href="/assets/js/24.c4c88a31.js"><link rel="prefetch" href="/assets/js/25.7fca3201.js"><link rel="prefetch" href="/assets/js/26.6dba630d.js"><link rel="prefetch" href="/assets/js/27.9e2aa1d9.js"><link rel="prefetch" href="/assets/js/28.b7246d72.js"><link rel="prefetch" href="/assets/js/29.5792c810.js"><link rel="prefetch" href="/assets/js/3.45a93981.js"><link rel="prefetch" href="/assets/js/30.3f6c38ee.js"><link rel="prefetch" href="/assets/js/31.ba180a28.js"><link rel="prefetch" href="/assets/js/32.42047177.js"><link rel="prefetch" href="/assets/js/33.5bdc472d.js"><link rel="prefetch" href="/assets/js/4.c9878ffb.js"><link rel="prefetch" href="/assets/js/5.ec07def1.js"><link rel="prefetch" href="/assets/js/6.1d35ff3d.js"><link rel="prefetch" href="/assets/js/7.49dde202.js"><link rel="prefetch" href="/assets/js/8.ba23d01a.js"><link rel="prefetch" href="/assets/js/9.f7202086.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3f949b7f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="./logo.png" alt="central park" class="logo"> <span class="site-name can-hide">central park</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据结构与算法</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/算法/Javascript数据结构与算法之队列.html" class="sidebar-link">Javascript数据结构与算法之队列</a></li><li><a href="/算法/Javascript数据结构与算法之栈.html" class="sidebar-link">Javascript数据结构与算法之栈</a></li><li><a href="/算法/Javascript数据结构与算法之链表.html" class="sidebar-link">Javascript数据结构与算法之链表</a></li><li><a href="/算法/Javascript数据结构与算法之二叉树.html" class="sidebar-link">Javascript数据结构与算法之二叉树</a></li><li><a href="/算法/Javascript数据结构与算法之bitmap.html" class="sidebar-link">Javascript数据结构与算法之bitmap</a></li><li><a href="/算法/Javascript数据结构与算法之堆.html" class="active sidebar-link">Javascript数据结构与算法之堆</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/算法/Javascript数据结构与算法之并查集.html" class="sidebar-link">Javascript数据结构与算法之并查集</a></li><li><a href="/算法/Javascript数据结构与算法之广度优先搜索.html" class="sidebar-link">Javascript数据结构与算法之广度优先搜索</a></li><li><a href="/算法/Javascript数据结构与算法之深度优先搜索.html" class="sidebar-link">Javascript数据结构与算法之深度优先搜索</a></li><li><a href="/算法/Javascript数据结构与算法之二分查找.html" class="sidebar-link">Javascript数据结构与算法之二分查找</a></li><li><a href="/算法/Javascript数据结构与算法之回溯算法.html" class="sidebar-link">Javascript数据结构与算法之回溯算法</a></li><li><a href="/算法/Javascript数据结构与算法之贪心算法.html" class="sidebar-link">Javascript数据结构与算法之贪心算法</a></li><li><a href="/算法/Javascript数据结构与算法之动态规划.html" class="sidebar-link">Javascript数据结构与算法之动态规划</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络相关</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript数据结构与算法之堆"><a href="#javascript数据结构与算法之堆" class="header-anchor">#</a> Javascript数据结构与算法之堆</h1> <h3 id="堆的定义"><a href="#堆的定义" class="header-anchor">#</a> 堆的定义:</h3> <p>堆（Heap）是一个可以被看成近似完全二叉树的数组。树上的每一个结点对应数组的一个元素。除了最底层外，该树是完全充满的，而且是从左到右填充。—— 来自：《算法导论》</p> <p>堆包括最大堆和最小堆：最大堆的每一个节点（除了根结点）的值不大于其父节点；最小堆的每一个节点（除了根结点）的值不小于其父节点。</p> <h3 id="堆的实现："><a href="#堆的实现：" class="header-anchor">#</a> 堆的实现：</h3> <p>堆有以下几个方法：</p> <ul><li>insert：把一个数值放进已经是堆结构的数组中，并保持堆结构，时间复杂度为<em>O(log n)</em>。</li> <li>extract：从最大堆中取出最大值或从最小堆中取出最小值，并将剩余的数组保持堆结构，时间复杂度为<em>O(log n)</em>。</li></ul> <p>show me code:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">defaultCmp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">&gt;</span> y<span class="token punctuation">;</span> <span class="token comment">// 默认是最大堆</span>

<span class="token keyword">const</span> <span class="token function-variable function">swap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Heap</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * 默认是最大堆
     * @param {Function} cmp
     */</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">cmp <span class="token operator">=</span> defaultCmp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>container <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cmp <span class="token operator">=</span> cmp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">insert</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> container<span class="token punctuation">,</span> cmp <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

        container<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> container<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> parent <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">cmp</span><span class="token punctuation">(</span>container<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> container<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">swap</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> index<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
            index <span class="token operator">=</span> parent<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> container<span class="token punctuation">,</span> cmp <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>container<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">swap</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> container<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> length <span class="token operator">=</span> container<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
            exchange <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span>exchange <span class="token operator">&lt;</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 以最大堆的情况来说：如果有右节点，并且右节点的值大于左节点的值</span>
            <span class="token keyword">let</span> right <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">&lt;</span> length <span class="token operator">&amp;&amp;</span> <span class="token function">cmp</span><span class="token punctuation">(</span>container<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">,</span> container<span class="token punctuation">[</span>exchange<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                exchange <span class="token operator">=</span> right<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">cmp</span><span class="token punctuation">(</span>container<span class="token punctuation">[</span>exchange<span class="token punctuation">]</span><span class="token punctuation">,</span> container<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">swap</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> exchange<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            index <span class="token operator">=</span> exchange<span class="token punctuation">;</span>
            exchange <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>container<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>container<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="队列的应用练习："><a href="#队列的应用练习：" class="header-anchor">#</a> 队列的应用练习：</h3> <p>leetcode题目练习：</p> <ol><li><a href="https://leetcode-cn.com/problems/zui-xiao-de-kge-shu-lcof/" target="_blank" rel="noopener noreferrer">最小的k个数<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>【简单】</li> <li><a href="https://leetcode-cn.com/problems/kth-largest-element-in-a-stream/" target="_blank" rel="noopener noreferrer">数据流中的第K大元素<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>【简单】</li> <li><a href="https://leetcode-cn.com/problems/find-median-from-data-stream/" target="_blank" rel="noopener noreferrer">数据流的中位数<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>【困难】</li></ol> <h4 id="_1-用栈实现队列"><a href="#_1-用栈实现队列" class="header-anchor">#</a> 1. 用栈实现队列</h4> <h5 id="题目描述："><a href="#题目描述：" class="header-anchor">#</a> 题目描述：</h5> <p>输入整数数组 arr ，找出其中最小的 k 个数。例如，输入4、5、1、6、2、7、3、8这8个数字，则最小的4个数字是1、2、3、4。</p> <h5 id="示例-1："><a href="#示例-1：" class="header-anchor">#</a> 示例 1：</h5> <div class="language- extra-class"><pre class="language-text"><code>输入：arr = [3,2,1], k = 2
输出：[1,2] 或者 [2,1]
</code></pre></div><h5 id="示例-2："><a href="#示例-2：" class="header-anchor">#</a> 示例 2：</h5> <div class="language- extra-class"><pre class="language-text"><code>输入：arr = [0,1,2,1], k = 1
输出：[0]
</code></pre></div><h5 id="限制："><a href="#限制：" class="header-anchor">#</a> 限制：</h5> <ul><li>0 &lt;= k &lt;= arr.length &lt;= 10000</li> <li>0 &lt;= arr[i] &lt;= 10000</li></ul> <h5 id="解题思路："><a href="#解题思路：" class="header-anchor">#</a> 解题思路：</h5> <p>建堆，extract<code>k</code>个数出来</p> <p>代码实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @param {number[]} arr
 * @param {number} k
 * @return {number[]}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">getLeastNumbers</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">===</span> k<span class="token punctuation">)</span> <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> heap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Heap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">&lt;</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 最小堆 Heap源码在上面</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        heap<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>ret<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>heap<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-数据流中的第k大元素"><a href="#_2-数据流中的第k大元素" class="header-anchor">#</a> 2. 数据流中的第K大元素</h4> <h5 id="题目描述：-2"><a href="#题目描述：-2" class="header-anchor">#</a> 题目描述：</h5> <p>设计一个找到数据流中第K大元素的类（class）。注意是排序后的第K大元素，不是第K个不同的元素。</p> <p>你的 <code>KthLargest</code> 类需要一个同时接收整数 <code>k</code> 和整数数组<code>nums</code> 的构造器，它包含数据流中的初始元素。每次调用 <code>KthLargest.add</code>，返回当前数据流中第K大的元素。</p> <h5 id="示例"><a href="#示例" class="header-anchor">#</a> 示例:</h5> <div class="language- extra-class"><pre class="language-text"><code>int k = 3;
int[] arr = [4,5,8,2];
KthLargest kthLargest = new KthLargest(3, arr);
kthLargest.add(3);   // returns 4
kthLargest.add(5);   // returns 5
kthLargest.add(10);  // returns 5
kthLargest.add(9);   // returns 8
kthLargest.add(4);   // returns 8
</code></pre></div><h5 id="说明"><a href="#说明" class="header-anchor">#</a> 说明:</h5> <p>你可以假设 <code>nums</code> 的长度≥ <code>k-1</code> 且<code>k</code> ≥ 1。</p> <h5 id="解题思路：-2"><a href="#解题思路：-2" class="header-anchor">#</a> 解题思路：</h5> <p>建立最小堆，长度为k，第k大的元素就是堆顶。</p> <p>代码实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @param {number} k
 * @param {number[]} nums
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">KthLargest</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">k<span class="token punctuation">,</span> nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Heap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">&lt;</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 最小堆 Heap源码在上面</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 大于堆顶入堆</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 出堆</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 入堆</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** 
 * @param {number} val
 * @return {number}
 */</span>
<span class="token class-name">KthLargest</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 出堆</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 入堆 保持堆的大小为k</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Your KthLargest object will be instantiated and called as such:
 * var obj = new KthLargest(k, nums)
 * var param_1 = obj.add(val)
 */</span>
</code></pre></div><h4 id="_3-数据流中的中位数"><a href="#_3-数据流中的中位数" class="header-anchor">#</a> 3. 数据流中的中位数</h4> <h5 id="题目描述：-3"><a href="#题目描述：-3" class="header-anchor">#</a> 题目描述：</h5> <p>中位数是有序列表中间的数。如果列表长度是偶数，中位数则是中间两个数的平均值。</p> <p>例如，</p> <p>[2,3,4] 的中位数是 3</p> <p>[2,3] 的中位数是 (2 + 3) / 2 = 2.5</p> <p>设计一个支持以下两种操作的数据结构：</p> <ul><li>void addNum(int num) - 从数据流中添加一个整数到数据结构中。</li> <li>double findMedian() - 返回目前所有元素的中位数。</li></ul> <h5 id="示例："><a href="#示例：" class="header-anchor">#</a> 示例：</h5> <div class="language- extra-class"><pre class="language-text"><code>addNum(1)
addNum(2)
findMedian() -&gt; 1.5
addNum(3) 
findMedian() -&gt; 2
</code></pre></div><h5 id="解题思路：-3"><a href="#解题思路：-3" class="header-anchor">#</a> 解题思路：</h5> <ol><li>建两个堆，一个最大堆，一个最小堆</li> <li>add添加值到最小堆</li> <li>中位数: if minHeap.length &gt; maxHeap.length 最小堆的堆顶 else 两个堆的堆顶相加/2</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * initialize your data structure here.
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">MedianFinder</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>minHeap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Heap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">&lt;</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 最小堆</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxHeap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Heap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 最大堆</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** 
 * @param {number} num
 * @return {void}
 */</span>
<span class="token class-name">MedianFinder</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">addNum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>minHeap<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxHeap<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>minHeap<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>minHeap<span class="token punctuation">.</span>container<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxHeap<span class="token punctuation">.</span>container<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>minHeap<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>maxHeap<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @return {number}
 */</span>
<span class="token class-name">MedianFinder</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">findMedian</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 两种情况 两者相加是单数 两者长度相差不会超过1</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>minHeap<span class="token punctuation">.</span>container<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxHeap<span class="token punctuation">.</span>container<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minHeap<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 两者相加是双数</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>minHeap<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxHeap<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Your MedianFinder object will be instantiated and called as such:
 * var obj = new MedianFinder()
 * obj.addNum(num)
 * var param_2 = obj.findMedian()
 */</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/算法/Javascript数据结构与算法之bitmap.html" class="prev">
        Javascript数据结构与算法之bitmap
      </a></span> <span class="next"><a href="/算法/Javascript数据结构与算法之并查集.html">
        Javascript数据结构与算法之并查集
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.40b58ba7.js" defer></script><script src="/assets/js/2.f70d309f.js" defer></script><script src="/assets/js/21.e78b3db0.js" defer></script>
  </body>
</html>
